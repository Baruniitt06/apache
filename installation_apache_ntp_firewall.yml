---
- name: Install http service
  hosts: all
 # become: true
#remote_user: ansible

  tasks:
    - name: create a group
      group:
        name: apache
        state: present

    - name: create a user
      user:
        name: apache
        state: present
        group: apache

    - name: Install httpd sevice
      yum:
        name: httpd
        state: latest
 
   # - name: httpd.conf configuration file
   #   get_url:
   #     url: http://myblogmchopker.blogspot.com/2017/08/ansible-tomcat-installation-deployment.html
   #     dest: /etc/httpd/conf/httpd.conf
   #     force: yes
   #     owner: apache
   #     group: apache
    - name: chnage index.html
      lineinfile:
        path: /var/www/html/index.html
        line: "hello from {{ ansible_hostname }}"
        create: yes
    - name: start httpd service
      service:
        name: httpd
        state: started
        enabled: true
    - nmae: NTP configuration
      yum:
        name: ntp
        state: present
    - name: configure ntp client config file for ntp server
      copy: 
        src: /root/ntp_config
        dest: /etc/ntpd.conf 
    - name: enable ntp daemon config 
      service:
        name: ntp 
        enabled: yes 
    - name: install frewalld
      yum:
        name: firewalld
        state: present
    - name: firewall changes
      firewalld 
        state: disabled
